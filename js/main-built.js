define("models/cards",["lodash"],function(e){var t=[],n=[],r=function(e,n){t.push({name:e,value:n})},i=function(){return t},s=function(){t=[]},o=function(){var n=e.groupBy(t,"value"),r=e.mapValues(n,function(t){return e.shuffle(t)}),i=[];return e.each(e.sortBy(e.keys(r)).reverse(),function(e){[].push.apply(i,r[e])}),i};return{add:r,clear:s,all:i,shuffleByPriority:o}}),define("models/fileIO",[],function(){var e=null,t=function(e,t){var n=new FileReader;n.onload=function(n){var r=n.target.result.split("\n"),i=[];_.each(r,function(t){tokens=[];if(t.length===0)return;e.type==="text/csv"?tokens=t.split(","):e.type==="text/tsv"?tokens=t.split("	"):tokens.push(t);var n,r=null;n=tokens[0],tokens.length>=2&&(r=parseFloat(tokens[1])),i.push({name:n,value:r})}),t(i)},n.readAsText(e)},n=function(t){var n=_.map(t,function(e,t){var n=t+1;return e.value===null?new String(n+". "+e.name+"\n"):new String(n+". "+e.name+" ("+e.value+")\n")}),r=new Blob(n,{type:"text/plain"});return e!==null&&window.URL.revokeObjectURL(e),e=window.URL.createObjectURL(r),e};return{parseNames:t,generateOutputFile:n}}),define("views/main",["jquery","lodash","materialize","models/cards","models/fileIO"],function(e,t,n,r,i){function a(){e(".modal-trigger").leanModal(),e("select").material_select(),e(".button-collapse").sideNav(),f(!0),e("#btn-import").click(function(){var n=document.getElementById("file-chooser");if(n.files.length==0)return;var s=n.files[0];document.getElementById("file-form").reset();if(s.type!=="text/csv"&&s.type!=="text/tsv"&&s.type!=="text/plain")return;i.parseNames(s,function(n){r.clear(),t.each(n,function(e){r.add(e.name,e.value)}),d(function(){e("#inputListContainer").removeClass("hide"),e("#mainListContainer").addClass("hide"),e("#waitingListContainer").addClass("hide"),p(e("#cards-list"),r.all(),0,"lightSpeedIn",function(){})})})})}function f(t){t?e("#btn-go").click(function(){r.all().length>0&&(f(!1),l(function(){f(!0)}))}).removeClass("disabled"):e("#btn-go").unbind("click").addClass("disabled")}function l(n){var i=parseFloat(document.getElementById("delay").value)*1e3,s=document.getElementById("selectOrder").value,o=parseInt(document.getElementById("waitlistCutoff").value);d(function(){e("#inputListContainer").addClass("hide"),e("#mainListContainer").addClass("hide"),e("#waitingListContainer").addClass("hide");var u=r.shuffleByPriority();s==="ascending"&&(u=u.reverse()),e("#mainListContainer").removeClass("hide").animateCss("slideInLeft",function(){}),o===0?p(e("#main-list"),u,i,"zoomInDown",n):p(e("#main-list"),t.slice(u,0,o),i,"zoomInDown",function(){e("#waitingListContainer").removeClass("hide").animateCss("slideInLeft",function(){}),p(e("#waiting-list"),t.slice(u,o),i,"zoomInDown",n)}),c(u)})}function c(e){document.getElementById("downloadLink").href=i.generateOutputFile(e)}function h(){e(window).scrollTop(e(document).height())}function p(e,n,r,i,s){var a=[];t.each(n,function(t,n){var s=new Promise(function(s){setTimeout(function(){var n=e.append(o({title:t.name,value:t.value===null?"":t.value,animation:i}));n.one(u,function(){s()}),h()},r*n)});a.push(s)}),Promise.all(a).then(function(){s()})}function d(t){var n=e(".name-card"),r=[];n.each(function(t,n){var i=new Promise(function(t){setTimeout(function(){e(n).animateCss("bounceOut",function(){e(n).css("opacity","0"),t()})},s*Math.random()*5)});r.push(i)});var i=function(){n.remove(),t()};r.length===0?i():Promise.all(r).then(i)}var s=100,o=t.template('<div class="animated <%= animation %> name-card col s12 m12"><div class="name-card card-panel teal"><span class="white-text"><%- title %></span><span class="right white-text"><%- value %></span></div></div>'),u="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";return e.fn.extend({animateCss:function(t,n){e(this).addClass("animated "+t).one(u,function(){e(this).removeClass("animated "+t),n()})}}),{init:a}}),define("app",["jquery","lodash","views/main"],function(e,t,n){var r=function(){n.init()};return{init:r}}),require.config({paths:{jquery:"http://cdn.jsdelivr.net/jquery/2.2.0/jquery.min",lodash:"http://cdn.jsdelivr.net/lodash/4.5.0/lodash.min",materialize:"https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min"},shim:{materialize:{deps:["jquery"]}}}),require(["app"],function(e){e.init()}),define("main",function(){});